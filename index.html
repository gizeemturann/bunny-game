<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Bunny Forest Adventure</title>
<style>
body{
    margin:0;
    overflow:hidden;
    background:#87CEEB;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}
canvas{ border:3px solid #222; }
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = 1000;
canvas.height = 500;

const worldWidth = 3000;
const gravity = 0.6;
let score = 0;

const camera = { x: 0 };

// ================= PLAYER =================
const player = {
    x: 100,
    y: 380,
    width: 40,
    height: 40,
    vx: 0,
    vy: 0,
    speed: 6,
    jump: 14,
    grounded: false
};

// ================= PLATFORMS =================
const platforms = [
    { x:0, y:430, w:worldWidth, h:70 },
    { x:300, y:350, w:200, h:20 },
    { x:650, y:300, w:200, h:20 },
    { x:1200, y:350, w:200, h:20 },
    { x:1700, y:300, w:200, h:20 },
    { x:2200, y:250, w:200, h:20 }
];

// ================= CARROTS =================
let carrots = [
    { x:350, y:310, taken:false },
    { x:700, y:260, taken:false },
    { x:1250, y:310, taken:false },
    { x:1750, y:260, taken:false }
];

// ================= BIRDS =================
let birds = [
    { x:1800, y:200, speed:2 },
    { x:2600, y:180, speed:3 }
];

// ================= TREES =================
const trees = [
    { x:200 }, { x:550 }, { x:850 },
    { x:1500 }, { x:2400 }
];

// ================= INPUT =================
const keys = {};
document.addEventListener("keydown", e=> keys[e.code]=true);
document.addEventListener("keyup", e=> keys[e.code]=false);

// ================= COLLISION =================
function collide(a,b){
    return a.x < b.x + b.w &&
           a.x + a.width > b.x &&
           a.y < b.y + b.h &&
           a.y + a.height > b.y;
}

// ================= UPDATE =================
function update(){

    // movement
    if(keys["ArrowLeft"]) player.vx = -player.speed;
    else if(keys["ArrowRight"]) player.vx = player.speed;
    else player.vx = 0;

    if((keys["Space"] || keys["ArrowUp"]) && player.grounded){
        player.vy = -player.jump;
        player.grounded = false;
    }

    player.vy += gravity;
    player.x += player.vx;
    player.y += player.vy;

    if(player.x < 0) player.x = 0;
    if(player.x + player.width > worldWidth)
        player.x = worldWidth - player.width;

    player.grounded = false;

    platforms.forEach(p=>{
        if(collide(player,p)){
            if(player.vy > 0){
                player.y = p.y - player.height;
                player.vy = 0;
                player.grounded = true;
            }
        }
    });

    carrots.forEach(c=>{
        if(!c.taken &&
           player.x < c.x+20 &&
           player.x+player.width > c.x &&
           player.y < c.y+30 &&
           player.y+player.height > c.y){
            c.taken = true;
            score++;
        }
    });

    birds.forEach(b=>{
        b.x -= b.speed;

        if(player.x < b.x+30 &&
           player.x+player.width > b.x &&
           player.y < b.y+30 &&
           player.y+player.height > b.y){
            player.x = 100;
            player.y = 380;
            score = 0;
        }
    });

    // camera follow
    camera.x = player.x - canvas.width/2;
    if(camera.x < 0) camera.x = 0;
    if(camera.x > worldWidth - canvas.width)
        camera.x = worldWidth - canvas.width;
}

// ================= DRAWING =================

function drawTree(x){
    x -= camera.x;
    ctx.fillStyle="#5d3a1a";
    ctx.fillRect(x,340,25,90);

    ctx.fillStyle="#2ecc71";
    ctx.beginPath();
    ctx.arc(x+12,330,40,0,Math.PI*2);
    ctx.fill();
}

function drawCarrot(x,y){
    x -= camera.x;
    ctx.fillStyle="orange";
    ctx.beginPath();
    ctx.moveTo(x,y);
    ctx.lineTo(x+10,y+30);
    ctx.lineTo(x-10,y+30);
    ctx.closePath();
    ctx.fill();

    ctx.fillStyle="green";
    ctx.fillRect(x-5,y-10,10,10);
}

function drawBird(b){
    const x = b.x - camera.x;
    ctx.fillStyle="black";
    ctx.beginPath();
    ctx.arc(x,b.y,15,0,Math.PI*2);
    ctx.fill();
}

function drawBunny(){
    const x = player.x - camera.x;
    const y = player.y;

    ctx.fillStyle="white";
    ctx.beginPath();
    ctx.arc(x+20,y+20,20,0,Math.PI*2);
    ctx.fill();

    ctx.fillRect(x+8,y-25,8,30);
    ctx.fillRect(x+24,y-25,8,30);

    ctx.fillStyle="pink";
    ctx.fillRect(x+10,y-20,4,20);
    ctx.fillRect(x+26,y-20,4,20);

    ctx.fillStyle="black";
    ctx.beginPath();
    ctx.arc(x+27,y+15,4,0,Math.PI*2);
    ctx.fill();

    ctx.fillStyle="pink";
    ctx.beginPath();
    ctx.arc(x+20,y+23,3,0,Math.PI*2);
    ctx.fill();
}

function draw(){

    ctx.clearRect(0,0,canvas.width,canvas.height);

    const g = ctx.createLinearGradient(0,0,0,canvas.height);
    g.addColorStop(0,"#87CEEB");
    g.addColorStop(1,"#dff6ff");
    ctx.fillStyle = g;
    ctx.fillRect(0,0,canvas.width,canvas.height);

    trees.forEach(t=>drawTree(t.x));

    platforms.forEach(p=>{
        ctx.fillStyle="#8B4513";
        ctx.fillRect(p.x - camera.x,p.y,p.w,p.h);
        ctx.fillStyle="#2ecc71";
        ctx.fillRect(p.x - camera.x,p.y,p.w,6);
    });

    carrots.forEach(c=>{
        if(!c.taken) drawCarrot(c.x,c.y);
    });

    birds.forEach(b=>drawBird(b));
    drawBunny();

    ctx.fillStyle="black";
    ctx.font="20px Arial";
    ctx.fillText("ðŸ¥• Score: "+score,20,30);
}

function loop(){
    update();
    draw();
    requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>,
