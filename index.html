<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Bunny Forest Adventure</title>

<style>
body {
    margin: 0;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: #87CEEB;
}

canvas {
    border: 2px solid black;
}
</style>
</head>

<body>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = 900;
canvas.height = 450;

const gravity = 0.6;

// ðŸŽµ ZÄ±plama sesi (kÃ¼Ã§Ã¼k beep)
function playJumpSound() {
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const oscillator = audioCtx.createOscillator();
    oscillator.type = "square";
    oscillator.frequency.setValueAtTime(500, audioCtx.currentTime);
    oscillator.connect(audioCtx.destination);
    oscillator.start();
    oscillator.stop(audioCtx.currentTime + 0.1);
}

const player = {
    x: 100,
    y: 330,
    width: 40,
    height: 40,
    velocityX: 0,
    velocityY: 0,
    speed: 5,
    jumpPower: 13,
    grounded: false
};

const platforms = [
    { x: 0, y: 380, width: 900, height: 70 },
    { x: 300, y: 300, width: 150, height: 20 },
    { x: 550, y: 240, width: 150, height: 20 }
];

const clouds = [
    { x: 100, y: 80, speed: 0.3 },
    { x: 400, y: 50, speed: 0.2 },
    { x: 700, y: 100, speed: 0.4 }
];

const trees = [
    { x: 150 },
    { x: 500 },
    { x: 750 }
];

const keys = {};
document.addEventListener("keydown", e => keys[e.code] = true);
document.addEventListener("keyup", e => keys[e.code] = false);

function detectCollision(a, b) {
    return (
        a.x < b.x + b.width &&
        a.x + a.width > b.x &&
        a.y < b.y + b.height &&
        a.y + a.height > b.y
    );
}

function update() {

    if (keys["ArrowLeft"]) player.velocityX = -player.speed;
    else if (keys["ArrowRight"]) player.velocityX = player.speed;
    else player.velocityX = 0;

    if ((keys["Space"] || keys["ArrowUp"]) && player.grounded) {
        player.velocityY = -player.jumpPower;
        player.grounded = false;
        playJumpSound();
    }

    player.velocityY += gravity;

    player.x += player.velocityX;
    player.y += player.velocityY;

    player.grounded = false;

    platforms.forEach(platform => {
        if (detectCollision(player, platform)) {
            if (player.velocityY > 0) {
                player.y = platform.y - player.height;
                player.velocityY = 0;
                player.grounded = true;
            }
        }
    });

    // Bulut hareketi
    clouds.forEach(cloud => {
        cloud.x += cloud.speed;
        if (cloud.x > canvas.width + 100) {
            cloud.x = -100;
        }
    });

    if (player.y > canvas.height) {
        player.x = 100;
        player.y = 330;
        player.velocityY = 0;
    }
}

function drawBackground() {
    const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
    gradient.addColorStop(0, "#87CEEB");
    gradient.addColorStop(1, "#cceeff");
    ctx.fillStyle = gradient;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
}

function drawCloud(x, y) {
    ctx.fillStyle = "white";
    ctx.beginPath();
    ctx.arc(x, y, 20, 0, Math.PI * 2);
    ctx.arc(x + 25, y, 25, 0, Math.PI * 2);
    ctx.arc(x + 50, y, 20, 0, Math.PI * 2);
    ctx.fill();
}

function drawTree(x) {
    ctx.fillStyle = "#8B4513";
    ctx.fillRect(x, 310, 20, 70);

    ctx.fillStyle = "#2ecc71";
    ctx.beginPath();
    ctx.arc(x + 10, 300, 30, 0, Math.PI * 2);
    ctx.fill();
}

function drawBunny() {

    // GÃ¶vde
    ctx.fillStyle = "white";
    ctx.beginPath();
    ctx.arc(player.x + 20, player.y + 20, 20, 0, Math.PI * 2);
    ctx.fill();

    // Kulaklar
    ctx.fillRect(player.x + 8, player.y - 20, 8, 25);
    ctx.fillRect(player.x + 24, player.y - 20, 8, 25);

    // GÃ¶z
    ctx.fillStyle = "black";
    ctx.beginPath();
    ctx.arc(player.x + 25, player.y + 15, 3, 0, Math.PI * 2);
    ctx.fill();

    // Burun
    ctx.fillStyle = "pink";
    ctx.beginPath();
    ctx.arc(player.x + 20, player.y + 22, 3, 0, Math.PI * 2);
    ctx.fill();
}

function draw() {

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    drawBackground();

    clouds.forEach(cloud => drawCloud(cloud.x, cloud.y));
    trees.forEach(tree => drawTree(tree.x));

    platforms.forEach(platform => {
        ctx.fillStyle = "#8B4513";
        ctx.fillRect(platform.x, platform.y, platform.width, platform.height);

        ctx.fillStyle = "#2ecc71";
        ctx.fillRect(platform.x, platform.y, platform.width, 5);
    });

    drawBunny();
}

function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>

